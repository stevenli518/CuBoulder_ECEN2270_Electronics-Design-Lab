Version 4
SHEET 1 880 680
WIRE -528 -176 -592 -176
WIRE -432 -176 -448 -176
WIRE -320 -176 -352 -176
WIRE -272 -176 -320 -176
WIRE 0 -176 -128 -176
WIRE 80 -176 0 -176
WIRE 144 -176 80 -176
WIRE 352 -176 144 -176
WIRE 480 -176 352 -176
WIRE -272 -144 -272 -176
WIRE -128 -144 -128 -176
WIRE 352 -144 352 -176
WIRE 0 -128 0 -176
WIRE 144 -128 144 -176
WIRE -272 -16 -272 -64
WIRE -272 -16 -592 -16
WIRE -128 -16 -128 -64
WIRE 0 -16 0 -64
WIRE 0 -16 -128 -16
WIRE 32 -16 0 -16
WIRE 144 -16 144 -48
WIRE 144 -16 32 -16
WIRE 352 -16 352 -64
WIRE 352 -16 144 -16
WIRE 32 16 32 -16
WIRE -16 144 -112 144
WIRE 48 144 -16 144
WIRE 96 144 48 144
WIRE 208 144 160 144
WIRE 240 144 208 144
WIRE 400 144 320 144
WIRE 528 144 480 144
WIRE 560 144 528 144
WIRE -16 160 -16 144
WIRE 320 160 320 144
WIRE 48 176 48 144
WIRE 208 176 208 144
WIRE 528 176 528 144
WIRE -112 240 -112 224
WIRE -16 240 -16 224
WIRE 48 272 48 256
WIRE 208 272 208 256
WIRE 320 272 320 240
WIRE 528 272 528 256
FLAG 560 144 enc
IOPIN 560 144 Out
FLAG -112 240 0
FLAG -16 240 0
FLAG 80 -176 omega
FLAG -320 -176 emf
FLAG 240 144 p
FLAG 320 272 0
FLAG -592 -176 +DC
IOPIN -592 -176 BiDir
FLAG -592 -16 -DC
IOPIN -592 -16 BiDir
FLAG 480 -176 omega
IOPIN 480 -176 BiDir
FLAG 32 16 0
FLAG 208 272 0
FLAG 48 272 0
FLAG 528 272 0
SYMBOL Digital\\schmtinv 96 80 R0
WINDOW 3 -37 30 Left 0
WINDOW 0 22 87 Left 0
SYMATTR Value Vt=0.5 Vh=0.5 td=10n
SYMATTR InstName Aenc
SYMBOL bi -112 224 R180
WINDOW 0 -55 54 Left 0
WINDOW 3 -134 -59 Left 0
SYMATTR InstName Bp
SYMATTR Value I=kenc*abs(v(omega))*(V(p)-0.5)
SYMBOL cap -32 160 R0
WINDOW 0 -16 55 Left 0
WINDOW 3 29 56 Left 0
SYMATTR InstName Cenc
SYMATTR Value 1m
SYMBOL ind -544 -160 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 -9 54 VBottom 0
SYMATTR InstName LM
SYMATTR Value 5m
SYMBOL res -448 -160 R270
WINDOW 0 32 56 VTop 0
WINDOW 3 -10 52 VBottom 0
SYMATTR InstName RM
SYMATTR Value {RM}
SYMBOL bv -272 -160 R0
WINDOW 0 12 13 Left 0
WINDOW 3 -93 163 Left 0
SYMATTR InstName Bemf
SYMATTR Value V=k*V(omega)
SYMBOL bi -128 -64 R180
WINDOW 0 -101 81 Left 0
WINDOW 3 -86 -67 Left 0
SYMATTR InstName Itorque
SYMATTR Value I=k*I(Bemf)
SYMBOL cap -16 -128 R0
SYMATTR InstName C_Jinertia
SYMATTR Value {J}
SYMBOL res 128 -144 R0
SYMATTR InstName R_Bfriction
SYMATTR Value {1/B}
SYMBOL bv 320 144 R0
WINDOW 0 40 50 Left 0
WINDOW 3 50 94 Left 0
SYMATTR InstName Benc
SYMATTR Value V=8*V(p)
SYMBOL bi 352 -144 R0
WINDOW 3 -264 153 Left 0
WINDOW 0 24 1 Left 0
SYMATTR Value I=sgn(V(+DC)-V(-DC))*Tint
SYMATTR InstName I_load_torque_int
SYMBOL res 496 128 R90
WINDOW 0 0 56 VBottom 0
WINDOW 3 32 56 VTop 0
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL res 192 160 R0
SYMATTR InstName Rp
SYMATTR Value 1k
SYMBOL res 32 160 R0
SYMATTR InstName Rc
SYMATTR Value 1Meg
SYMBOL res 512 160 R0
SYMATTR InstName Re
SYMATTR Value 1Meg
TEXT -72 320 Left 0 !.param kenc=1.2
TEXT -184 -296 Center 1 ;ECEN 2270\nDC motor (FIT0458) model 3
TEXT 16 -216 Left 0 ;wheel speed [rad/s]
TEXT 416 192 Left 0 ;Encoder pulses
TEXT 248 72 Center 0 ;Encoder model
TEXT -512 192 Left 0 !.param RM = 2.5\n \n.param k = 0.7\n \n.param J = 0.02\n \n.param B = 3.33m\n \n.param Tint = 0.05
TEXT -456 136 Center 1 ;Update These Parameters\n(Do not make any other changes)
TEXT -528 -264 Left 0 ;Electrical Model
TEXT 136 -264 Left 0 ;Mechanical Model
RECTANGLE Normal -240 336 -656 96
RECTANGLE Normal -192 16 -720 -240
RECTANGLE Normal 640 48 -176 -240
RECTANGLE Normal 656 352 -160 96
